{% extends "dashboard_base.html" %}
{% block sheri %}
<div class="container mt-4">

    <h2 class="mb-4">ðŸ’° Deposit</h2>

    <!-- Wallet card -->
    <div class="card mb-4 shadow-sm">
        <div class="card-body text-center">
            
            <h5 class="mb-2">Your wallet address:</h5>
            <p class="text-monospace fw-bold">{{ wallet.address }}</p>

            <p class="text-muted mb-3">
                Send <strong>USDT TRC20</strong> to the address above.  
                After transfer, the deposit will appear here once confirmed.
            </p>

            <!-- QR Code -->
            <div class="d-flex justify-content-center">
                <img src="data:image/png;base64,{{ qr_code }}" 
                     alt="QR Code" 
                     class="mb-3 border rounded shadow-sm" 
                     style="width:200px; height:200px;">
            </div>

            <p class="text-muted">
                Scan the QR code to send USDT TRC20 directly to your address.
            </p>
            <a href="" class="btn btn-warning btn-lg mb-3">Check balance</a>

            <p class="text-muted">
                After transfer, wait a few minutes and click "Check balance"
            </p>
        </div>
    </div>

    <!-- Deposit history -->
    <h3 class="mb-3">ðŸ“œ Deposit history</h3>
    <div class="table-responsive">
        <table class="table table-striped align-middle">
            <thead class="table-dark">
                <tr>
                    <th>Amount</th>
                    <th>Status</th>
                    <th>Created at</th>
                    <th>Confirmed at</th>
                </tr>
            </thead>
            <tbody>
                {% for dep in deposits %}
                <tr>
                    <td>{{ dep.amount }} USDT</td>
                    <td>
                        {% if dep.status == "pending" %}
                            <span class="badge bg-warning">Pending</span>
                        {% elif dep.status == "confirmed" %}
                            <span class="badge bg-success">Confirmed</span>
                        {% else %}
                            <span class="badge bg-danger">Rejected</span>
                        {% endif %}
                    </td>
                    <td>{{ dep.created_at|date:"Y-m-d H:i" }}</td>
                    <td>
                        {% if dep.confirmed_at %}
                            {{ dep.confirmed_at|date:"Y-m-d H:i" }}
                        {% else %}
                            ---
                        {% endif %}
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="4" class="text-center text-muted">
                        No deposits yet
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

</div>
{% endblock %}
